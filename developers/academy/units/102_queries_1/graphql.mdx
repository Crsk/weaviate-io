---
title: A little more about GraphQL
sidebar_position: 25
---

import imageUrl from '../../tmp_images/academy_placeholder.jpg';

## <i class="fa-solid fa-square-chevron-right"></i>&nbsp;&nbsp;Why use GraphQL?

<img src={imageUrl} alt="Image alt" width="75%"/>

Here, we'll pause a little bit to talk about why we use GraphQL, and what to keep in mind when using GraphQL with Weaviate.

### <i class="fa-solid fa-chalkboard"></i>&nbsp;&nbsp;GraphQL structure

One of the key benefits of GraphQL is that it allows the user to specify the exact data that they want to retrieve. This means that the user can request only the data that they need, reducing over-fetching or under-fetching of data.

Let's review the fundamental syntax of GraphQL in Weaviate.

```graphql
{
  <Function> {
    <Class> {
      <properties>
    }
  }
}
```

You can see that a Weaviate GraphQL query contains multiple components. If you were to query a database of quiz objects, the fields in the above query would be as follows:

* `<Function>`: The function that you want to use, such as `Get`, `Aggregate`, or `Explore`.
* `<Class>`: The class that you want to retrieve data from, such as `Question` or `Category`.
* `<properties>`: The properties that you want to retrieve, such as `question`, `answer` or `value`.

Each field can also accept arguments, such as `limit` to limit the number of objects to be returned, or `where` to apply a filter. 

The data flow with a GraphQL query can be conceptualized like this:

![](https://kinsta.com/wp-content/uploads/2022/09/graphql.png)

This specificity may seem challenging at first. However, it is a powerful feature that allows you to build highly customized queries, and to retrieve only the data that you need. 

It is also highly efficient, as what may have taken multiple requests in a REST API can be done in a single GraphQL query.

## <i class="fa-solid fa-square-chevron-right"></i>&nbsp;&nbsp;GraphQL and Weaviate clients

<img src={imageUrl} alt="Image alt" width="75%"/>

Weaviate client libraries simplify the use of GraphQL syntax by allowing interaction with Weaviate using constructs of the respective native programming language.

The client libraries also give the option to use raw GraphQL queries directly.

So, the learning material will refer to use raw GraphQL queries to deepen your understanding and increase your comfort level with this crucial topic. However, we will provide code examples using the client libraries as we go.

### <i class="fa-solid fa-code"></i>&nbsp;&nbsp;Query code examples

Later on in the units, each code example will be shown in tabs to allow you to switch between the raw GraphQL query and the client library code. For example, the following code example is shown in both raw GraphQL and Python client library code.

<!-- Delete these imports if already imported in the file -->
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs groupId="languages">
<TabItem value="graphql" label="GraphQL">

```graphql
{
  Get {
    Question (limit: 1) {
      question
      answer
    }
  }
}
```

</TabItem>
<TabItem value="py" label="Python">

```python
<!-- Python code goes here -->
```

</TabItem>
<TabItem value="js" label="JavaScript">

```js
<!-- JavaScript code goes here -->
```

</TabItem>
<TabItem value="go" label="Go">

```go
<!-- Go code goes here -->
```

</TabItem>
<TabItem value="java" label="Java">

```java
<!-- Java code goes here -->
```

</TabItem>
<TabItem value="curl" label="Curl">

```bash
<!-- Curl code goes here -->
```

</TabItem>
</Tabs>

### <i class="fa-solid fa-code"></i>&nbsp;&nbsp;Raw GraphQL with the client library

In fact, all Weaviate clients can also execute raw GraphQL queries. The following code examples show how each client can be used to execute a raw GraphQL query.

<!-- TODO - modularize these into separate files -->

<Tabs groupId="languages">
<TabItem value="py" label="Python">

```python
<!-- Python code goes here -->
```

</TabItem>
<TabItem value="js" label="JavaScript">

```js
<!-- JavaScript code goes here -->
```

</TabItem>
<TabItem value="go" label="Go">

```go
<!-- Go code goes here -->
```

</TabItem>
<TabItem value="java" label="Java">

```java
<!-- Java code goes here -->
```

</TabItem>
<TabItem value="curl" label="Curl">

```bash
<!-- Curl code goes here -->
```

</TabItem>
</Tabs>

:::info GraphQL in requests

Try it out yourself - and you should be able to confirm that the "raw" GraphQL query produces the same response as the equivalent query in client-native syntax.

We note that each GraphQL query which is sent to the endpoint takes the below form. The GraphQL query is provided as the value to the `query` key in the JSON payload.

```json
{
    "query": "{ # GRAPHQL QUERY }"
}
```

For our purposes, however, we will only need to construct the query body and pass it to the GraphQL console, or to an appropriate client as the raw query.

:::

## <i class="fa-solid fa-square-chevron-right"></i>&nbsp;&nbsp;Weaviate GraphQL console

<img src={imageUrl} alt="Image alt" width="75%"/>

:::warning TODO
Only if necessary and is not introduced earlier

Introduce the console as a convenient way to try out GraphQL queries
:::

## <i class="fa-solid fa-square-chevron-right"></i>&nbsp;&nbsp;Review

<img src={imageUrl} alt="Image alt" width="75%"/>

Each section should have a quick recap/review video of about a minute.

### <i class="fa-solid fa-pen-to-square"></i>&nbsp;&nbsp;Review exercise

**Aspirational section.** Would like to have the user provide a freeform input, and get back a similarity score and our definition.

:::info TODO
Can you describe, in your own sentence, XXX?

Input box -> vectorizer -> compare to model answer.
:::

### <i class="fa-solid fa-lightbulb-on"></i>&nbsp;&nbsp;Key takeaways

:::info
Add summary
:::

import Quiz from '/src/components/Academy/quiz.js'
const varName = [{
  questionText: 'questionText',
  answerOptions: [
    {
      answerText: 'answerOne',
      isCorrect: false,
      feedback: 'feedbackOne',
    },
    {
      answerText: 'answerTwo',
      isCorrect: false,
      feedback: 'feedbackTwo',
    },
    {
      answerText: 'answerThree',
      isCorrect: false,
      feedback: 'feedbackThree',
    },
  ]
}];
